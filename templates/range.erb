% range = netinfo.range
%if range
%
%  if range.address.ipv4?
NETWORK_ADDRESS = <%= range.address.network.to_s %>
NETWORK_MASK = <%= range.address.netmask %>

AR = [
    TYPE = IP4,
    IP = <%= range.address.first.to_s %>,
    SIZE = <%= range.address.size - 2 %>
]
%  end
%
%  if range.address.ipv6?
NETWORK_ADDRESS = <%= range.address.network.to_s %>
NETWORK_MASK = <%= range.address.prefix %>

AR = [
    TYPE = IP6,
%  if IPAddress('fc00::/7').include? range.address
    ULA_PREFIX = <%= range.address.network.to_s %>,
%  else
    GLOBAL_PREFIX = <%= range.address.network.to_s %>,
%  end
%   # limit address range (required for OpenNebula)
    SIZE = <%= range.address.size >= 2**31 ? 2**31 : range.address.size - 2 %>
]
%  end
%end
